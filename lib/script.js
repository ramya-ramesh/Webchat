"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

require("core-js/stable");

require("regenerator-runtime/runtime");

require("react-app-polyfill/ie11");

var _react = _interopRequireDefault(require("react"));

var _reactDom = _interopRequireDefault(require("react-dom"));

var _reactRedux = require("react-redux");

var _store = require("./store");

var _channel = require("./actions/channel");

var _App = _interopRequireDefault(require("./containers/App"));

var idChatDiv = 'cai-webchat-div';

if (!document.getElementById(idChatDiv)) {
  var element = document.createElement('div');
  element.id = idChatDiv;
  document.body.appendChild(element);
}

var root = document.getElementById(idChatDiv);
var script = document.currentScript || document.getElementById('cai-webchat');
var channelId = script.getAttribute('channelId');
var token = script.getAttribute('token');
var readOnly = false;

if (root && channelId && token) {
  (0, _channel.getChannelPreferences)(channelId, token).then(function (preferences) {
    _reactDom.default.render( /*#__PURE__*/_react.default.createElement(_reactRedux.Provider, {
      store: _store.store
    }, /*#__PURE__*/_react.default.createElement(_App.default, {
      token: token,
      channelId: channelId,
      preferences: preferences,
      readOnlyMode: readOnly
    })), root);
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHQuanMiXSwibmFtZXMiOlsiaWRDaGF0RGl2IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJyb290Iiwic2NyaXB0IiwiY3VycmVudFNjcmlwdCIsImNoYW5uZWxJZCIsImdldEF0dHJpYnV0ZSIsInRva2VuIiwicmVhZE9ubHkiLCJ0aGVuIiwicHJlZmVyZW5jZXMiLCJSZWFjdERPTSIsInJlbmRlciIsInN0b3JlIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBRUEsSUFBTUEsU0FBUyxHQUFHLGlCQUFsQjs7QUFFQSxJQUFJLENBQUNDLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QkYsU0FBeEIsQ0FBTCxFQUF5QztBQUN2QyxNQUFNRyxPQUFPLEdBQUdGLFFBQVEsQ0FBQ0csYUFBVCxDQUF1QixLQUF2QixDQUFoQjtBQUNBRCxFQUFBQSxPQUFPLENBQUNFLEVBQVIsR0FBYUwsU0FBYjtBQUNBQyxFQUFBQSxRQUFRLENBQUNLLElBQVQsQ0FBY0MsV0FBZCxDQUEwQkosT0FBMUI7QUFDRDs7QUFFRCxJQUFNSyxJQUFJLEdBQUdQLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QkYsU0FBeEIsQ0FBYjtBQUVBLElBQU1TLE1BQU0sR0FBR1IsUUFBUSxDQUFDUyxhQUFULElBQTBCVCxRQUFRLENBQUNDLGNBQVQsQ0FBd0IsYUFBeEIsQ0FBekM7QUFFQSxJQUFNUyxTQUFTLEdBQUdGLE1BQU0sQ0FBQ0csWUFBUCxDQUFvQixXQUFwQixDQUFsQjtBQUNBLElBQU1DLEtBQUssR0FBR0osTUFBTSxDQUFDRyxZQUFQLENBQW9CLE9BQXBCLENBQWQ7QUFFQSxJQUFNRSxRQUFRLEdBQUcsS0FBakI7O0FBQ0EsSUFBSU4sSUFBSSxJQUFJRyxTQUFSLElBQXFCRSxLQUF6QixFQUFnQztBQUM5QixzQ0FBc0JGLFNBQXRCLEVBQWlDRSxLQUFqQyxFQUF3Q0UsSUFBeEMsQ0FBNkMsVUFBQUMsV0FBVyxFQUFJO0FBQzFEQyxzQkFBU0MsTUFBVCxlQUNFLDZCQUFDLG9CQUFEO0FBQVUsTUFBQSxLQUFLLEVBQUVDO0FBQWpCLG9CQUNFLDZCQUFDLFlBQUQ7QUFDRSxNQUFBLEtBQUssRUFBRU4sS0FEVDtBQUVFLE1BQUEsU0FBUyxFQUFFRixTQUZiO0FBR0UsTUFBQSxXQUFXLEVBQUVLLFdBSGY7QUFJRSxNQUFBLFlBQVksRUFBRUY7QUFKaEIsTUFERixDQURGLEVBUUVOLElBUkY7QUFVRCxHQVhEO0FBWUQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ2NvcmUtanMvc3RhYmxlJ1xyXG5pbXBvcnQgJ3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSdcclxuaW1wb3J0ICdyZWFjdC1hcHAtcG9seWZpbGwvaWUxMSdcclxuXHJcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcclxuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSdcclxuaW1wb3J0IHsgUHJvdmlkZXIgfSBmcm9tICdyZWFjdC1yZWR1eCdcclxuaW1wb3J0IHsgc3RvcmUgfSBmcm9tICdzdG9yZSdcclxuXHJcbmltcG9ydCB7IGdldENoYW5uZWxQcmVmZXJlbmNlcyB9IGZyb20gJ2FjdGlvbnMvY2hhbm5lbCdcclxuaW1wb3J0IEFwcCBmcm9tICdjb250YWluZXJzL0FwcCdcclxuXHJcbmNvbnN0IGlkQ2hhdERpdiA9ICdjYWktd2ViY2hhdC1kaXYnXHJcblxyXG5pZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkQ2hhdERpdikpIHtcclxuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICBlbGVtZW50LmlkID0gaWRDaGF0RGl2XHJcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KVxyXG59XHJcblxyXG5jb25zdCByb290ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWRDaGF0RGl2KVxyXG5cclxuY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdCB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FpLXdlYmNoYXQnKVxyXG5cclxuY29uc3QgY2hhbm5lbElkID0gc2NyaXB0LmdldEF0dHJpYnV0ZSgnY2hhbm5lbElkJylcclxuY29uc3QgdG9rZW4gPSBzY3JpcHQuZ2V0QXR0cmlidXRlKCd0b2tlbicpXHJcblxyXG5jb25zdCByZWFkT25seSA9IGZhbHNlXHJcbmlmIChyb290ICYmIGNoYW5uZWxJZCAmJiB0b2tlbikge1xyXG4gIGdldENoYW5uZWxQcmVmZXJlbmNlcyhjaGFubmVsSWQsIHRva2VuKS50aGVuKHByZWZlcmVuY2VzID0+IHtcclxuICAgIFJlYWN0RE9NLnJlbmRlcihcclxuICAgICAgPFByb3ZpZGVyIHN0b3JlPXtzdG9yZX0+XHJcbiAgICAgICAgPEFwcFxyXG4gICAgICAgICAgdG9rZW49e3Rva2VufVxyXG4gICAgICAgICAgY2hhbm5lbElkPXtjaGFubmVsSWR9XHJcbiAgICAgICAgICBwcmVmZXJlbmNlcz17cHJlZmVyZW5jZXN9XHJcbiAgICAgICAgICByZWFkT25seU1vZGU9e3JlYWRPbmx5fSAvPlxyXG4gICAgICA8L1Byb3ZpZGVyPixcclxuICAgICAgcm9vdCxcclxuICAgIClcclxuICB9KVxyXG59XHJcbiJdfQ==